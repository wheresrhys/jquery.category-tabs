/*! Category Tabs - v0.1.0 - 2013-01-24
* https://github.com/wheresrhys/jquery.category-tabs
* Copyright (c) 2013 Rhys Evans; Licensed MIT */
(function(e){e.fn.categoryTabs=function(t){function n(t){var n=[];e("li",t).each(function(){n=n.concat(e(this).attr("class").split(/\s+/))});var r={},i=[];for(var s=0,o=n.length;s<o;++s)!r.hasOwnProperty(n[s])&&n[s]!==""&&(r[n[s]]=!0,i.push(n[s]));return i}function r(e){var t={},n=s.titleList||{},r,i;s.ignoreList=s.ignoreList.concat(["ui-widget-content","ui-helper-reset","ui-category-tabs","ui-tabs-panel","ui-corner-bottom"]);if(s.ignoreList||s.excludeList){var o=s.ignoreList.concat(s.excludeList);for(r=0,i=o.length;r<i;r++)t[o[r]]=o[r]}for(r=0,i=e.length;r<i;r++)t[e[r]]?(e.splice(r,1),r--,i--):n[e[r]]?e[r]={cssClass:e[r],title:n[e[r]]}:e[r]={cssClass:e[r],title:e[r]};return s.sort&&(s.sort==="asc"||s.sort==="desc")&&(e=e.sort(function(e,t){var n=[e.title,t.title];return n=n.sort(),n[0]===e.title?-1:1}),s.sort==="desc"&&e.reverse()),s.includeShowAll&&e.unshift({cssClass:"",title:"Show all"}),e}var i=this;this.defaults={includeList:null,ignoreList:[],excludeList:null,titleList:null,includeShowAll:!0,initialView:"",sort:""};var s=e.extend({},i.defaults,t);return this.each(function(){function t(){if(s.excludeList){var t="."+s.excludeList.join(" .");e(t,a).addClass("ui-helper-hidden")}s.initialView&&i(s.initialView)?e('>ul.ui-widget-header li a[href="#'+s.initialView+'"]',a).click():e('>ul.ui-widget-header li a[href="#"]',a).click()}function i(e){for(var t=0,n=l.length;t<n;t++)if(l[t].cssClass===e)return!0;return!1}function o(){e(">ul.ui-widget-header a",a).click(function(){var t=e(this).parent();if(t.not(".ui-state-active")){t.addClass("ui-state-active ui-tabs-selected").siblings().removeClass("ui-state-active ui-tabs-selected");var n=e(this).attr("href");n.length>1?(n.indexOf("#")===0?n=n.substr(1):n=n.split("/").reverse()[0].split("#").reverse()[0],e('>:not(".ui-widget-header")>li',a).each(function(){e(this).hasClass(n)?e(this).removeClass("ui-tabs-hide"):e(this).addClass("ui-tabs-hide")})):e('>:not(".ui-widget-header")>li',a).removeClass("ui-tabs-hide")}return!1}).hover(function(){e(this).parent().addClass("ui-state-hover")},function(){e(this).parent().removeClass("ui-state-hover")})}function u(){var e='<ul class="ui-widget-header ui-helper-reset ui-helper-clearfix ui-hover-state ui-corner-all ui-tabs-nav">';for(var t=0,n=l.length;t<n;t++)e+='<li class="ui-state-default ui-corner-top"><a href="#'+l[t].cssClass+'">'+l[t].title+"</a></li>";e+="</ul>",a.prepend(e)}e(this).addClass("ui-helper-reset").children().addClass("ui-tabs-panel ui-widget-content").end().wrap('<div class="ui-widget ui-widget-content ui-tabs ui-corner-all">');var a=e(this).parent(),f=s.includeList||n(this),l=r(f);u(),o(),t()})}})(jQuery);